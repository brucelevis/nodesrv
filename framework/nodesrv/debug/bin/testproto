#!bin/lneox
require('deploy')
package.path = string.format('%s;%s/?.lua', package.path, DeployConf.asset_dir)
package.path = string.format('%s;%s/test/?.lua', package.path, DeployConf.asset_dir)

local root_dir = string.format('%s/test', DeployConf.asset_dir)
print(root_dir)
local files = File.listdir(root_dir);
print(Json.encode(files))

local file = arg[1]
local funcname = arg[2]

local mod = require(file)

for k, v in pairs(mod) do
    if not funcname or k == funcname then
        v()
    end
end


